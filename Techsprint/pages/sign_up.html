<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Create your Smart Project Recommender account - Join thousands of engineering students discovering personalized project recommendations">
    <title>Sign Up - Smart Project Recommender</title>
    <link rel="stylesheet" href="../css/main.css">
  
  <script type="module" async src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fsmartproj4129back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.12"></script>
  <script type="module" defer src="https://static.rocket.new/rocket-shot.js?v=0.0.2"></script>
  </head>
<body class="min-h-screen bg-gradient-to-br from-primary-900 via-primary-800 to-secondary-600">
    <!-- Background Decorative Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-20 -left-20 w-96 h-96 bg-accent-400/10 rounded-full blur-3xl"></div>
        <div class="absolute bottom-20 -right-20 w-96 h-96 bg-secondary-400/10 rounded-full blur-3xl"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-primary-600/5 rounded-full blur-3xl"></div>
    </div>

    <!-- Main Container -->
    <div class="relative min-h-screen flex items-center justify-center px-4 py-12">
        <div class="w-full max-w-md">
            <!-- Logo/Brand Section -->
            <div class="text-center mb-8 animate-in fade-in-0 slide-in-from-top-4 duration-slow">
                <a href="landing_page.html" class="inline-flex items-center justify-center mb-4 group" aria-label="Return to home page">
                    <svg class="w-16 h-16 transition-transform duration-250 group-hover:scale-110" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- AI Brain Icon -->
                        <circle cx="50" cy="50" r="45" fill="url(#brainGradient)" opacity="0.2"/>
                        <path d="M50 15C30.67 15 15 30.67 15 50C15 69.33 30.67 85 50 85C69.33 85 85 69.33 85 50C85 30.67 69.33 15 50 15ZM50 75C36.19 75 25 63.81 25 50C25 36.19 36.19 25 50 25C63.81 25 75 36.19 75 50C75 63.81 63.81 75 50 75Z" fill="url(#brainGradient)"/>
                        <circle cx="40" cy="45" r="5" fill="#FCD34D"/>
                        <circle cx="60" cy="45" r="5" fill="#FCD34D"/>
                        <path d="M35 60C35 60 40 65 50 65C60 65 65 60 65 60" stroke="#FCD34D" stroke-width="3" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="brainGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#60A5FA;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                </a>
                <h1 class="text-3xl md:text-4xl font-heading font-bold text-white mb-2">Create Account</h1>
                <p class="text-primary-100 font-body">Join Smart Project Recommender today</p>
            </div>

            <!-- Sign Up Form Card -->
            <div class="bg-white/95 backdrop-blur-md rounded-xl shadow-2xl p-8 animate-in fade-in-0 zoom-in-95 duration-slow animate-stagger">
                <!-- Success Message (Hidden by default) -->
                <div id="successMessage" class="hidden mb-6 p-4 bg-success-50 border border-success-200 rounded-lg">
                    <div class="flex items-start gap-3">
                        <svg class="w-5 h-5 text-success-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <div>
                            <h3 class="text-sm font-medium text-success-800">Account created successfully!</h3>
                            <p class="text-sm text-success-700 mt-1">Redirecting to your dashboard...</p>
                        </div>
                    </div>
                </div>

                <!-- Error Message Container (Hidden by default) -->
                <div id="errorMessage" class="hidden mb-6 p-4 bg-error-50 border border-error-200 rounded-lg">
                    <div class="flex items-start gap-3">
                        <svg class="w-5 h-5 text-error-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                        </svg>
                        <div>
                            <h3 class="text-sm font-medium text-error-800">Registration failed</h3>
                            <p id="errorText" class="text-sm text-error-700 mt-1"></p>
                        </div>
                    </div>
                </div>

                <!-- Registration Form -->
                <form id="signupForm" class="space-y-6" novalidate>
                    <!-- Username Field -->
                    <div>
                        <label for="username" class="input-label">
                            <span class="flex items-center gap-2">
                                <svg class="w-4 h-4 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                                Username
                            </span>
                        </label>
                        <input 
                            type="text" 
                            id="username" 
                            name="username"
                            class="input"
                            placeholder="Enter your username"
                            required
                            minlength="3"
                            maxlength="20"
                            autocomplete="username"
                            aria-describedby="usernameError"
                        />
                        <p id="usernameError" class="hidden mt-2 text-sm text-error-600" role="alert"></p>
                    </div>

                    <!-- Email Field -->
                    <div>
                        <label for="email" class="input-label">
                            <span class="flex items-center gap-2">
                                <svg class="w-4 h-4 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                                Email Address
                            </span>
                        </label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email"
                            class="input"
                            placeholder="your.email@example.com"
                            required
                            autocomplete="email"
                            aria-describedby="emailError"
                        />
                        <p id="emailError" class="hidden mt-2 text-sm text-error-600" role="alert"></p>
                    </div>

                    <!-- Password Field -->
                    <div>
                        <label for="password" class="input-label">
                            <span class="flex items-center gap-2">
                                <svg class="w-4 h-4 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                                </svg>
                                Password
                            </span>
                        </label>
                        <div class="relative">
                            <input 
                                type="password" 
                                id="password" 
                                name="password"
                                class="input pr-12"
                                placeholder="Create a strong password"
                                required
                                minlength="8"
                                autocomplete="new-password"
                                aria-describedby="passwordError passwordStrength"
                            />
                            <button 
                                type="button" 
                                id="togglePassword"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary hover:text-text-secondary transition-colors duration-250 touch-target"
                                aria-label="Toggle password visibility"
                            >
                                <svg id="eyeIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                                <svg id="eyeOffIcon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                                </svg>
                            </button>
                        </div>
                        <p id="passwordError" class="hidden mt-2 text-sm text-error-600" role="alert"></p>
                        
                        <!-- Password Strength Indicator -->
                        <div id="passwordStrength" class="mt-3 space-y-2">
                            <div class="flex items-center gap-2">
                                <div class="flex-1 h-1.5 bg-slate-200 rounded-full overflow-hidden">
                                    <div id="strengthBar" class="h-full transition-all duration-250 rounded-full" style="width: 0%"></div>
                                </div>
                                <span id="strengthText" class="text-xs font-medium text-text-tertiary"></span>
                            </div>
                            <ul class="text-xs text-text-secondary space-y-1">
                                <li class="flex items-center gap-2">
                                    <svg id="lengthCheck" class="w-4 h-4 text-text-tertiary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                                    </svg>
                                    <span>At least 8 characters</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <svg id="uppercaseCheck" class="w-4 h-4 text-text-tertiary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                                    </svg>
                                    <span>One uppercase letter</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <svg id="numberCheck" class="w-4 h-4 text-text-tertiary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                                    </svg>
                                    <span>One number</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Confirm Password Field -->
                    <div>
                        <label for="confirmPassword" class="input-label">
                            <span class="flex items-center gap-2">
                                <svg class="w-4 h-4 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                                </svg>
                                Confirm Password
                            </span>
                        </label>
                        <div class="relative">
                            <input 
                                type="password" 
                                id="confirmPassword" 
                                name="confirmPassword"
                                class="input pr-12"
                                placeholder="Re-enter your password"
                                required
                                autocomplete="new-password"
                                aria-describedby="confirmPasswordError"
                            />
                            <button 
                                type="button" 
                                id="toggleConfirmPassword"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-text-tertiary hover:text-text-secondary transition-colors duration-250 touch-target"
                                aria-label="Toggle confirm password visibility"
                            >
                                <svg id="eyeIconConfirm" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                                <svg id="eyeOffIconConfirm" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                                </svg>
                            </button>
                        </div>
                        <p id="confirmPasswordError" class="hidden mt-2 text-sm text-error-600" role="alert"></p>
                    </div>

                    <!-- Terms and Conditions -->
                    <div class="flex items-start gap-3">
                        <input 
                            type="checkbox" 
                            id="terms" 
                            name="terms"
                            class="mt-1 w-4 h-4 text-primary border-border rounded focus:ring-focus-ring focus:ring-offset-2"
                            required
                            aria-describedby="termsError"
                        />
                        <label for="terms" class="text-sm text-text-secondary">
                            I agree to the <a href="javascript:void(0)" class="text-primary hover:text-primary-700 font-medium transition-colors duration-250">Terms of Service</a> and <a href="javascript:void(0)" class="text-primary hover:text-primary-700 font-medium transition-colors duration-250">Privacy Policy</a>
                        </label>
                    </div>
                    <p id="termsError" class="hidden mt-2 text-sm text-error-600" role="alert"></p>

                    <!-- Submit Button -->
                    <button 
                        type="submit" 
                        id="submitBtn"
                        class="btn btn-primary w-full group"
                        aria-label="Create account"
                    >
                        <span class="flex items-center justify-center gap-2">
                            <svg class="w-5 h-5 transition-transform duration-250 group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
                            </svg>
                            <span id="submitText">Create Account</span>
                            <svg id="loadingSpinner" class="hidden w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </span>
                    </button>
                </form>

                <!-- Divider -->
                <div class="relative my-8">
                    <div class="absolute inset-0 flex items-center">
                        <div class="w-full border-t border-border"></div>
                    </div>
                    <div class="relative flex justify-center text-sm">
                        <span class="px-4 bg-white text-text-tertiary font-caption">Or continue with</span>
                    </div>
                </div>

                <!-- Google Sign In Button -->
                <button 
                    type="button"
                    id="googleSignInBtn"
                    class="btn btn-outline w-full group hover:bg-slate-50"
                    aria-label="Sign up with Google"
                >
                    <span class="flex items-center justify-center gap-3">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                        </svg>
                        <span class="font-medium">Sign up with Google</span>
                    </span>
                </button>

                <!-- Sign In Link -->
                <div class="mt-6 text-center">
                    <p class="text-sm text-text-secondary">
                        Already have an account? 
                        <a href="login.html" class="text-primary hover:text-primary-700 font-medium transition-colors duration-250">
                            Sign in
                        </a>
                    </p>
                </div>
            </div>

            <!-- Security Badge -->
            <div class="mt-6 text-center animate-in fade-in-0 slide-in-from-top-4 duration-slow animate-stagger-2">
                <div class="inline-flex items-center gap-2 text-primary-100 text-sm">
                    <svg class="w-5 h-5 text-success-300" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    <span>Your data is protected with Firebase security</span>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for Form Validation and Interactions -->
    <script>
        // DOM Elements
        const signupForm = document.getElementById('signupForm');
        const usernameInput = document.getElementById('username');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const termsCheckbox = document.getElementById('terms');
        const submitBtn = document.getElementById('submitBtn');
        const submitText = document.getElementById('submitText');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');

        // Password Toggle Functionality
        const togglePassword = document.getElementById('togglePassword');
        const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
        const eyeIcon = document.getElementById('eyeIcon');
        const eyeOffIcon = document.getElementById('eyeOffIcon');
        const eyeIconConfirm = document.getElementById('eyeIconConfirm');
        const eyeOffIconConfirm = document.getElementById('eyeOffIconConfirm');

        togglePassword.addEventListener('click', () => {
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;
            eyeIcon.classList.toggle('hidden');
            eyeOffIcon.classList.toggle('hidden');
        });

        toggleConfirmPassword.addEventListener('click', () => {
            const type = confirmPasswordInput.type === 'password' ? 'text' : 'password';
            confirmPasswordInput.type = type;
            eyeIconConfirm.classList.toggle('hidden');
            eyeOffIconConfirm.classList.toggle('hidden');
        });

        // Password Strength Checker
        const strengthBar = document.getElementById('strengthBar');
        const strengthText = document.getElementById('strengthText');
        const lengthCheck = document.getElementById('lengthCheck');
        const uppercaseCheck = document.getElementById('uppercaseCheck');
        const numberCheck = document.getElementById('numberCheck');

        function updatePasswordStrength(password) {
            let strength = 0;
            const checks = {
                length: password.length >= 8,
                uppercase: /[A-Z]/.test(password),
                number: /[0-9]/.test(password)
            };

            // Update check icons
            updateCheckIcon(lengthCheck, checks.length);
            updateCheckIcon(uppercaseCheck, checks.uppercase);
            updateCheckIcon(numberCheck, checks.number);

            // Calculate strength
            if (checks.length) strength += 33;
            if (checks.uppercase) strength += 33;
            if (checks.number) strength += 34;

            // Update strength bar
            strengthBar.style.width = strength + '%';
            
            if (strength === 0) {
                strengthBar.className = 'h-full transition-all duration-250 rounded-full';
                strengthText.textContent = '';
            } else if (strength <= 33) {
                strengthBar.className = 'h-full transition-all duration-250 rounded-full bg-error-500';
                strengthText.textContent = 'Weak';
                strengthText.className = 'text-xs font-medium text-error-600';
            } else if (strength <= 66) {
                strengthBar.className = 'h-full transition-all duration-250 rounded-full bg-warning-500';
                strengthText.textContent = 'Medium';
                strengthText.className = 'text-xs font-medium text-warning-600';
            } else {
                strengthBar.className = 'h-full transition-all duration-250 rounded-full bg-success-500';
                strengthText.textContent = 'Strong';
                strengthText.className = 'text-xs font-medium text-success-600';
            }

            return checks;
        }

        function updateCheckIcon(element, isValid) {
            if (isValid) {
                element.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>';
                element.classList.remove('text-text-tertiary');
                element.classList.add('text-success-500');
            } else {
                element.innerHTML = '<circle cx="12" cy="12" r="10" stroke-width="2"/>';
                element.classList.remove('text-success-500');
                element.classList.add('text-text-tertiary');
            }
        }

        passwordInput.addEventListener('input', (e) => {
            updatePasswordStrength(e.target.value);
            clearError('password');
        });

        // Real-time Validation
        usernameInput.addEventListener('input', () => clearError('username'));
        emailInput.addEventListener('input', () => clearError('email'));
        confirmPasswordInput.addEventListener('input', () => clearError('confirmPassword'));
        termsCheckbox.addEventListener('change', () => clearError('terms'));

        function clearError(fieldName) {
            const errorElement = document.getElementById(fieldName + 'Error');
            if (errorElement) {
                errorElement.classList.add('hidden');
                errorElement.textContent = '';
            }
            errorMessage.classList.add('hidden');
        }

        function showError(fieldName, message) {
            const errorElement = document.getElementById(fieldName + 'Error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
            }
        }

        function showGlobalError(message) {
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
            successMessage.classList.add('hidden');
        }

        function showSuccess() {
            successMessage.classList.remove('hidden');
            errorMessage.classList.add('hidden');
        }

        // Form Validation
        function validateForm() {
            let isValid = true;

            // Clear previous errors
            ['username', 'email', 'password', 'confirmPassword', 'terms'].forEach(clearError);

            // Username validation
            const username = usernameInput.value.trim();
            if (username.length < 3) {
                showError('username', 'Username must be at least 3 characters long');
                isValid = false;
            } else if (username.length > 20) {
                showError('username', 'Username must not exceed 20 characters');
                isValid = false;
            } else if (!/^[a-zA-Z0-9_]+$/.test(username)) {
                showError('username', 'Username can only contain letters, numbers, and underscores');
                isValid = false;
            }

            // Email validation
            const email = emailInput.value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showError('email', 'Please enter a valid email address');
                isValid = false;
            }

            // Password validation
            const password = passwordInput.value;
            const passwordChecks = updatePasswordStrength(password);
            if (!passwordChecks.length || !passwordChecks.uppercase || !passwordChecks.number) {
                showError('password', 'Password must meet all requirements');
                isValid = false;
            }

            // Confirm password validation
            const confirmPassword = confirmPasswordInput.value;
            if (password !== confirmPassword) {
                showError('confirmPassword', 'Passwords do not match');
                isValid = false;
            }

            // Terms validation
            if (!termsCheckbox.checked) {
                showError('terms', 'You must agree to the Terms of Service and Privacy Policy');
                isValid = false;
            }

            return isValid;
        }

        // Form Submission
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            if (!validateForm()) {
                return;
            }

            // Disable submit button and show loading
            submitBtn.disabled = true;
            submitText.classList.add('hidden');
            loadingSpinner.classList.remove('hidden');

            try {
                // Simulate Firebase registration (replace with actual Firebase code)
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Mock user data for Firestore
                const userData = {
                    username: usernameInput.value.trim(),
                    email: emailInput.value.trim(),
                    createdAt: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };

                // Store in localStorage (replace with Firebase Firestore)
                localStorage.setItem('currentUser', JSON.stringify(userData));
                localStorage.setItem('isAuthenticated', 'true');

                // Show success message
                showSuccess();

                // Redirect to home page after 2 seconds
                setTimeout(() => {
                    window.location.href = 'home_dashboard.html';
                }, 2000);

            } catch (error) {
                // Show error message
                showGlobalError(error.message || 'Registration failed. Please try again.');
                
                // Re-enable submit button
                submitBtn.disabled = false;
                submitText.classList.remove('hidden');
                loadingSpinner.classList.add('hidden');
            }
        });

        // Google Sign In
        const googleSignInBtn = document.getElementById('googleSignInBtn');
        googleSignInBtn.addEventListener('click', async () => {
            try {
                // Simulate Google Sign In (replace with actual Firebase Google Auth)
                await new Promise(resolve => setTimeout(resolve, 1500));

                // Mock Google user data
                const googleUserData = {
                    username: 'GoogleUser',
                    email: 'user@gmail.com',
                    provider: 'google',
                    createdAt: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };

                // Store in localStorage
                localStorage.setItem('currentUser', JSON.stringify(googleUserData));
                localStorage.setItem('isAuthenticated', 'true');

                // Show success and redirect
                showSuccess();
                setTimeout(() => {
                    window.location.href = 'home_dashboard.html';
                }, 1500);

            } catch (error) {
                showGlobalError('Google sign-in failed. Please try again.');
            }
        });

        // Prevent form submission on Enter in text fields (except submit button)
        signupForm.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && e.target.type !== 'submit') {
                e.preventDefault();
            }
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>